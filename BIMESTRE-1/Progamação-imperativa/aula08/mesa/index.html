<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>C√°lculo IMC</title>
</head>
<body>
    <h1>C√°lculo IMC</h1>
    
    <h2>IMC √© a sigla para √çndice de Massa Corp√≥rea, par√¢metro adotado pela Organiza√ß√£o Mundial de Sa√∫de para calcular o peso ideal de cada pessoa.</h2>
    
    <p>O √≠ndice √© calculado da seguinte maneira: divide-se o peso do paciente pela sua altura elevada ao quadrado. Diz-se que o indiv√≠duo tem peso normal quando o resultado do IMC est√° entre 18,5 e 24,9.<br>Quer descobrir seu IMC? Insira seu peso e sua altura nos campos abaixo e compare com os √≠ndices da tabela. Importante: siga os exemplos e use pontos como separadores.</p>
    
    <button onclick="processoCalculoImc()">Calcular IMC</button>

    <script type="text/javascript">
        /*
            N√≠vel I - Refatorando
            O que pode ser feito para melhorar a legibilidade¬π do c√≥digo?

            ¬πFacilidade de entendimento do algoritimo gerado no c√≥digo. 

            N√≠vel II - Adicionando novas funcionalidades
            O usu√°rio com sobrepeso, obsidade e/ou obsidade grave dever√£o:
            - Receber uma alerta recomendando uma consulta com nutricionista (Boleano - true ou false);
                - Caso a resposta seja sim, preencher√° com:
                    - Seu nome;
                    - Dia da semana que pretende se consultar;
                    - O hor√°rio do dia que pretende se consultar;
                    - Agradecer o usu√°rio pelo nome e informar o dia e hor√°rio da consulta com o Dra. Luana Nagydai.
                - Caso a resposta seja n√£o:
                    - Receber√° um pedido de agradecimento.

            N√≠vel III - Corre√ß√£o de error 
            (üçí do bolo)
            Recebemos um pedido de altera√ß√£o da cl√≠nica:
            O usu√°rio com sobrepeso, obsidade e/ou obsidade grave dever√£o:
            - Receber uma alerta recomendando uma consulta com nutricionista (Boleano - true ou false);
                - Caso a resposta seja sim, preencher√° com:
                    - Seu nome;
                    - Dia da semana que pretende se consultar;
                    - O hor√°rio do dia que pretende se consultar;
                    (ajuste)
                    - Confirmar com o usu√°rio se o dia e o hor√°rio est√£o corretos:
                        Caso a resposta seja sim:
                        - Segue o fluxo normalmente.
                    - Caso a resposta seja n√£o:
                        - Dia da semana que pretende se consultar;
                        - O hor√°rio do dia que pretende se consultar;
                    (fim do ajuste)
                    - Agradecer o usu√°rio pelo nome e informar o dia e hor√°rio da consulta com o Dra. Luana Nagydai.
                - Caso a resposta seja n√£o:
                    - Receber√° um pedido de agradecimento.

        */

        var peso;
        var altura;
        var resultadoImc;
        var perfilImc;
        var marcarConsulta=false;
        var nome;
        var diasemana;
        var horario;
        var confirmaInfo=false;


        function perguntaPeso() {
            peso = prompt('Qual seu peso?');
        }

        function perguntaAltura() {
            altura = prompt('Qual sua Altura?');
        }

        function calculaIMC() {
            resultadoImc = peso / (altura * altura);
        }

        function difinirPerfilImc() {

            if (resultadoImc<=18.5) {
                perfilImc = 'Magreza';
            }
            else if (resultadoImc >=18.5 && resultadoImc <= 25) {
                perfilImc = 'Normal';
            }
            else if (resultadoImc >25 && resultadoImc <= 30) {
                perfilImc = 'Sobrepeso';
            }
            else if (resultadoImc >30 && resultadoImc <= 40) {
                perfilImc = 'Obesidade';
            }
            else {
                perfilImc = 'Obesidade Grave';
            }
                            
        }

        function comunicarUsuario () {
            alert(`Seu IMC √© iqual a: ${resultadoImc} e sua seu perfil √©: ${perfilImc}`);
        }

        function sugestaoConsulta () {
            if (perfilImc=="Obesidade" || perfilImc=="Obesidade Grave" || perfilImc=="Sobrepeso"){
                marcarConsulta = window.confirm('Voce gostaria de marcar uma consulta com o Nutricionista?');
                agendarConsulta ();
            }
            else {
               alert('Obrigada! Tenha uma boa semana.');
            }

        }

        function agendarConsulta () {
            if (marcarConsulta==true) {
                nome = prompt('Qual o seu nome?');
                confirmardados()                
            }
            else {
                alert('Obrigada! Tenha uma boa semana.');
            }
        }

        function confirmardados() {
            coletarDados();
            confirmaInfo = window.confirm(`Voce confirma a data ${diasemana} √°s ${horario}?`);
            
            if (confirmaInfo) {
                alert(`Obrigada pelas informa√ß√µes, sua consulta foi agendada para dia ${diasemana} √°s ${horario} com a Dra. Luana Nagydai.`)
            }
            else {
                confirmardados();
            }
        }

        function coletarDados () {
            diasemana = prompt('Qual dia e m√™s voce quer agendar? Coloque a data no modelo MM/AAAA');
            horario = prompt(`No dia ${diasemana}, em qual horario voce que se consultar?`);
        }

        function processoCalculoImc () {
            perguntaPeso();
            perguntaAltura();
            calculaIMC();
            difinirPerfilImc();
            comunicarUsuario();
            sugestaoConsulta();

        }

    </script>
</body>
</html>